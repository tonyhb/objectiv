// Generated by CoffeeScript 1.3.3
(function() {

  require(["modernizr", "app", "router", "views/app", "collections/sites"], function(Modernizr, app, router, AppView, Sites) {
    window.app = app;
    app.Router = new router.Router();
    app.Sites = new Sites();
    app.Sites.reset(Seed.sites);
    app.AppView = new AppView();
    app.AppView.render();
    if (Modernizr.history) {
      Backbone.history.start({
        pushState: true,
        root: "/admin/"
      });
      return $(document).on('click', 'a', function(e) {
        var href;
        href = e.target.getAttribute('href').replace('/admin/', '');
        app.Router.navigate(href, {
          trigger: true
        });
        e.preventDefault();
        return false;
      });
    } else {
      return Backbone.history.start({
        root: "/admin/"
      });
    }
  });

}).call(this);
