// Generated by CoffeeScript 1.3.3
(function() {

  define(["app", "text!templates/menu.html"], function(app, menuTemplate) {
    var MenuView;
    return MenuView = Backbone.View.extend({
      tagName: 'ul',
      id: 'menu',
      template: _.template(menuTemplate),
      initialize: function() {
        app.Sites.on('changeSite', function(site) {
          return this.render();
        }, this);
        return app.Router.on('all', function(name) {
          var menu;
          menu = name.replace('route:show', 'menu-').toLowerCase();
          if (document.getElementById(menu)) {
            $('#menu .active').removeClass('active');
            return $('#' + menu).addClass('active');
          }
        });
      },
      render: function() {
        if (app.currentSite) {
          $(this.el).html(this.template());
          return $('#header-content').append(this.el);
        }
      }
    });
  });

}).call(this);
