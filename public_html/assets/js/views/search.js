// Generated by CoffeeScript 1.3.3
(function() {

  define(["app", "text!templates/search.html"], function(app, searchTemplate) {
    var SearchView;
    return SearchView = Backbone.View.extend({
      tagName: 'div',
      id: 'omnibox',
      template: _.template(searchTemplate),
      term: '',
      initialize: function() {
        this.filter = _.debounce(this.filter, 300);
        return app.Sites.on('changeSite', function(site) {
          return this.rebuildCache(site);
        }, this);
      },
      unbind: function() {
        return app.Sites.off('changeSite', null, this);
      },
      events: {
        'keydown #omnibox_search': 'filter',
        'click #omnibox_search': 'filter'
      },
      render: function() {
        if (app.currentSite) {
          $(this.el).html(this.template);
        } else {
          $(this.el).html('');
        }
        if (this.el.parentNode === null) {
          return $('#menu').after(this.el);
        }
      },
      filter: function(evt) {
        var val;
        val = evt.target.value;
        if (this.term === val) {
          return;
        }
        this.term = val;
        return console.log(val);
      },
      rebuildCache: function(site) {}
    });
  });

}).call(this);
