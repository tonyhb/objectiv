// Generated by CoffeeScript 1.3.3
(function() {

  define(["app", "models/theme", "collections/themes", "text!templates/themes/new.html"], function(app, Theme, Themes, contentTemplate) {
    var NewThemeView;
    return NewThemeView = Backbone.View.extend({
      template: _.template(contentTemplate),
      events: {
        "submit #newTheme": "submit"
      },
      initialize: function() {
        if (app.cache.Themes === void 0) {
          app.cache.Themes = new Themes();
          return app.cache.Themes.fetch();
        }
      },
      render: function() {
        return this.$el.html(this.template({
          siteName: app.currentSite.get('name')
        }));
      },
      submit: function(event) {
        var theme;
        event.preventDefault();
        theme = new Theme();
        theme.set({
          'nme': $('#themeName').val(),
          'dsc': $('#themeDesc').val()
        });
        console.log(theme, theme.isNew(), theme.attributes._id);
        if (theme.isValid() === true) {
          theme.save();
          return app.cache.Themes.add(theme);
        } else {
          return console.log("invalid");
        }
      }
    });
  });

}).call(this);
